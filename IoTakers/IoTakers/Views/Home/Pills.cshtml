@model IoTakers.Models.RequestsViewModel


<script src="~/js/PillsController.js"></script>

<style>
    #newPillName {
        margin-left: 10px;
    }
    .pointer:hover {
        cursor: pointer;
    }
</style>

<!--PILLS VIEW-->
<section class="content" ng-controller="Pills">
    <div class="row" style="display:flex">
        <div class="col-lg-12 col-md-12" style="margin: 0px auto 2em auto; padding-left:0px; text-align:center">
            <h3>Medicamentos Registados</h3>
        </div>
    </div>
    <div class="row" style="display:flex">
        <div class="col-lg-5 col-md-5" style="margin:0 auto">
            <table class="table">
                <thead style="background-color:#212529;color:white; text-align:center">
                    <tr>
                        <th scope="col" style="text-align: center;">#</th>
                        <th scope="col" style="text-align: center;">PillName</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody style="text-align:center">
                    <tr ng-repeat="pill in pillsRegistered">
                        <th scope="row" style="text-align: center;">{{$index + 1}}</th>
                        <td>{{ pill.Name }}</td>
                        <td ng-click="RemovePill($index);"><i data-dismiss="modal" class="pointer fas fa-window-close" style="font-size:1.5em"></i></td>
                    </tr>
                </tbody>
            </table>
            <button id="callAddPill" class="btn" style="float:left">Add Pill</button>
            @*<table id="pillsTable" class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Número</th>
                            <th>Medicamento</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="pill in pillsRegistered">
                            <td>{{$index + 1}} </td>
                            <td>{{ pill.Name }}</td>
                        </tr>
                    </tbody>
                </table>*@
        </div>
    </div>
</section>
@*<div class="modal fade" id="confirmNewPill" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body" style="text-align:center">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <img src="~/img/pills.png" style="width:300px;">
                        <h4 style="text-align:center">PillName</h4>
                        <input type="text" placeholder="PillName" style="text-align:center" />
                    </div>
                </div>

                <h4 style="margin:0 3em">A new payment order will enter the system . Make sure you have everything paid. </h4>
            </div>
            <div class="modal-footer" style="text-align:center">

                <button id="acceptOrder" data-dismiss="modal" type="button" class="btn btn-secondary" style="margin:0 auto !important">Accept</button>
            </div>
        </div>
    </div>
</div>*@

<!--Add Pill Modal -->
<div class="modal fade" id="addPill" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Add a new Pill</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="top: 0.5em;position: absolute;right: 0.7em;">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <span id="numerOfBoxesSpan">Name</span>
                <input id="newPillName" type="text" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="float:left">No</button>
                <button id="btn_callAddApi" type="button" data-dismiss="modal" class="btn btn-primary">Yes</button>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        var angular_model = @Html.Raw(Json.Encode(Model));
        var ctrlIndex = getScope('Pills');
        ctrlIndex.init(angular_model);
        ctrlIndex.$apply();
    });
    $('#btn_callAddApi').on('click', function () {
        var ctrlIndex = getScope('Pills');
        ctrlIndex.AddPill();
        ctrlIndex.$apply();
    });
    $('#callAddPill').on('click', function () {
        $('#addPill').modal();
    });
</script>